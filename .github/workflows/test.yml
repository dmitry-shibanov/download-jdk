name: test
on: push
jobs:
  jdk:
    name: "${{ matrix.os }} + JDK ${{ matrix.java }}"
    strategy:
      fail-fast: false
      matrix:
        os: [ubuntu-latest, macOS-latest]
        java: [14, 13]
    runs-on: ${{ matrix.os }}
    steps:
    - uses: actions/checkout@v1
    - uses: ./
      with:
        feature: ${{ matrix.java }}
    - uses: actions/setup-java@v1
      with:
        java-version: "${{ env.JAVA_VERSION }}"
        jdkFile: "${{ env.JDK_FILE }}"
    - run: java --version
